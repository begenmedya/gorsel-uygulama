services:
  - type: web
    name: gorsel-uygulama
    env: python
    plan: free
    buildCommand: |
      pip install -r requirements.txt
      python -c "from PIL import Image; print('Pillow version:', Image.__version__)"
      mkdir -p /tmp/uploads /tmp/outputs
      cp *.ttf *.png /tmp/
    startCommand: "gunicorn web_app:app --workers 2 --threads 4 --timeout 300 --max-requests 100"
    envVars:
      - key: UPLOAD_FOLDER
        value: /tmp/uploads
      - key: OUTPUT_FOLDER
        value: /tmp/outputs
      - key: SECRET_KEY
        generateValue: true
      - key: PYTHONUNBUFFERED
        value: "true"
    disk:
      name: data
      mountPath: /tmp
      sizeGB: 1
    healthCheckPath: /
    autoDeploy: false
